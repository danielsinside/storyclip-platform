global:
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alerts@storyclip.local'

route:
  receiver: 'slack'
  group_by: ['alertname']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 2h

receivers:
- name: 'slack'
  slack_configs:
  - api_url: '${SLACK_WEBHOOK_URL}' # Set this in your environment or docker-compose
    channel: '#storyclip-alerts'
    send_resolved: true
    title: '{{ .Status | toUpper }}: {{ .CommonAnnotations.summary }}'
    text: |
      *{{ .CommonLabels.alertname }}* ({{ .Status }})
      {{- range .Alerts }}
      - *Instance:* {{ .Labels.instance }}
      - *Severity:* {{ .Labels.severity }}
      - *Desc:* {{ .Annotations.description }}
      - *Starts:* {{ .StartsAt }}
      {{- end }}

- name: 'default'
  webhook_configs:
  - url: 'http://localhost:3000/webhooks/alerts'
    send_resolved: true
